# 🔒 GitHub上传安全清单

## ⚠️ 重要提醒
在将项目上传到GitHub之前，请确保以下敏感信息已得到妥善保护：

## 1. 环境变量文件 (.env)
- ✅ `.env` 文件已在 `.gitignore` 中被忽略
- ✅ 只有 `env.example` 文件会被上传（包含示例配置，无真实敏感信息）
- ✅ 确保你的真实 `.env` 文件包含以下敏感信息且不会被上传：
  - SMTP邮箱授权码 (`EMAIL_PASS`)
  - 数据库密码 (`DB_PASSWORD`)
  - JWT密钥 (`JWT_SECRET`, `JWT_REFRESH_SECRET`)
  - 其他API密钥和密码

## 2. 数据库信息
- ✅ 数据库连接信息通过环境变量配置
- ✅ 生产环境数据库密码不会暴露
- ✅ 开发环境数据不会被上传

## 3. 用户账号信息
- ✅ 用户密码使用bcrypt加密存储
- ✅ 管理员默认密码可在部署时自定义
- ✅ 真实用户数据不会被上传

## 4. 其他敏感信息
- ✅ 上传文件目录 (`uploads/`) 已被忽略
- ✅ 日志文件已被忽略
- ✅ 证书文件已被忽略
- ✅ 临时文件已被忽略

## 5. 上传前检查清单

### 检查命令
```bash
# 检查是否有.env文件被跟踪
git ls-files | grep -E "\.env"

# 检查是否有敏感文件被跟踪
git ls-files | grep -E "\.(key|pem|crt|p12|pfx|secret)"

# 检查是否有上传文件被跟踪
git ls-files | grep -E "uploads/"

# 检查是否有日志文件被跟踪
git ls-files | grep -E "\.log"
```

### 预期结果
- 所有命令都应该返回空结果
- 如果有文件被列出，需要从git跟踪中移除

## 6. 部署说明

### 新用户部署步骤
1. 克隆项目
2. 复制 `env.example` 为 `.env`
3. 编辑 `.env` 文件，填入自己的配置信息
4. 运行 `npm install`
5. 运行 `npm run db:setup` 设置数据库
6. 运行 `npm start` 启动项目

### 环境变量配置示例
```bash
# 复制环境变量文件
cp env.example .env

# 编辑环境变量文件
nano .env

# 主要需要修改的配置：
# - DB_PASSWORD=你的数据库密码
# - EMAIL_PASS=你的邮箱授权码
# - JWT_SECRET=你的JWT密钥
# - JWT_REFRESH_SECRET=你的刷新密钥
```

## 7. 安全最佳实践

### 生产环境
- 使用强密码和复杂的JWT密钥
- 启用HTTPS
- 配置防火墙
- 定期备份数据库
- 监控日志文件

### 开发环境
- 使用不同的数据库
- 使用测试邮箱
- 不要使用生产环境的密钥

## 8. 紧急情况处理

如果意外上传了敏感信息：
1. 立即更改所有密码和密钥
2. 删除GitHub上的敏感文件
3. 使用 `git filter-branch` 或 `BFG Repo-Cleaner` 清理历史记录
4. 通知相关用户更改密码

## 9. 验证清单

上传前请确认：
- [ ] `.env` 文件不在git跟踪中
- [ ] 没有真实的数据库密码在代码中
- [ ] 没有真实的邮箱授权码在代码中
- [ ] 没有真实的JWT密钥在代码中
- [ ] 没有用户真实数据在代码中
- [ ] 所有测试文件已删除
- [ ] 所有临时文件已删除
- [ ] 所有日志文件已删除

## 10. 联系方式

如有安全问题，请立即联系项目维护者。 